ROUTINE TEST2 
INITEMPMAG
 D FILE^|"DEPOT"|SQLUtilitaires
 s DATAMAG=""
 s CPT=0
 s DATA="0\1\0\\0"
 s CODEMAG=""
 s CODEMAG=$O(@HCPOS@(CODEMAG))
 while CODEMAG'=""
 {
	s DATAMAG=$G(@HCPOS@(CODEMAG,2))
	i $P(DATAMAG,"\",13)=""
	{
		i (CODEMAG'="X900")&&(CODEMAG'="X998")&&(CODEMAG'="X999")&&(CODEMAG'="X001")
		{
			//k ^PFEMP("PP-"_CODEMAG)
			s ^PFEMP("ZP-"_CODEMAG)=DATA
			s CPT=CPT+1
			w !, CODEMAG
		}
	}
	s CODEMAG=$O(@HCPOS@(CODEMAG))
 }
 w !, CPT
 q

TESTDISTRIB
 s CPT=$O(^DISTRIBSTATUT(""))
 s TMP=""
 while CPT'=""
 {
	S TMP=$G(^DISTRIBSTATUT(CPT))
	i (+$P(TMP,"\",1)=1)&&($P(CPT,"-",1)'="X001")
	{
		w !, "->"_CPT_" ->"_$P(TMP,"\",1)
 		
	}
	s CPT=$O(^DISTRIBSTATUT(CPT))
 }
 Q
GUEMP
 S ZONE=""
 F  S ZONE=$O(^GUEMP(ZONE)) Q:(ZONE="")  D
 .s DESTEMPL=20
 .I $E(ZONE,1,1)="A" s DESTEMPL=1
 .I $E(ZONE,1,1)="B" s DESTEMPL=2
 .I ($E(ZONE,1,1)="C")||($E(ZONE,1,1)="D") s DESTEMPL=3
 .I $E(ZONE,1,1)="J" s DESTEMPL=4
 .I $E(ZONE,1,1)="T" s DESTEMPL=10
 .I $E(ZONE,1,1)="Z" s DESTEMPL=-1
 .S EMPL=""
 .F  S EMPL=$O(^GUEMP(ZONE,EMPL)) Q:(EMPL="")  D
 ..S DATA=$G(^GUEMP(ZONE,EMPL))
 ..s $P(DATA,"\",3)=1
 ..S TYPEEMPL=+$P(DATA,"\",2)
 ..s TYPEEMPL=0
 ..I TYPEEMPL=0 D
 ...s $P(DATA,"\",2)=DESTEMPL
 ...Q
 ..S ^GUEMP(ZONE,EMPL)=DATA
 ..S ^MODGUEMP("X999",ZONE,EMPL)=DATA
 ..Q
 .Q
 Q
KILLDISTRIB
 S NUMDISTRIB=""
 F  S NUMDISTRIB=$O(^DISTRIBSTATUT(NUMDISTRIB)) Q:(NUMDISTRIB="")  D
 .S DATA=$G(^DISTRIBSTATUT(NUMDISTRIB))
 .S MAG=$E(NUMDISTRIB,1,4)
 .I MAG'="M168" D
 ..I +$E(DATA,1,1)'=9 D
 ...S ^tmpDISTRIBSTATUT(NUMDISTRIB)=DATA
 ...S ^DISTRIBSTATUT(NUMDISTRIB)="9\DELETEINFO\20110404\00000000"
 ...w !,NUMDISTRIB
 ...Q
 ..Q
 .Q
 Q
TEST2
 S MAG="G224"
 S NEV=""
 S ^HWTEMPDEUX(MAG,1)="123\TEZSTT"
 S ^HWTEMPDEUX(MAG,2)="CPOUCOZCUOSEUCSUO"
 
 
 
 
 
 
 
 
 
 
 
 
 
 
